# =============================================================================
# SonarQube — Project analysis configuration
# Run analysis with:
#   docker run --rm --network=host \
#     -e SONAR_HOST_URL=http://localhost:9000 \
#     -e SONAR_TOKEN=<your_token> \
#     -v $(pwd):/usr/src \
#     sonarsource/sonar-scanner-cli
# =============================================================================

sonar.projectKey=facephi-secdevops
sonar.projectName=FacePhi SecDevOps LTI

# -----------------------------------------------------------------------------
# Sources and tests
# -----------------------------------------------------------------------------
sonar.sources=backend/src,frontend/src
sonar.tests=backend/src,frontend/src
sonar.test.inclusions=**/*.test.ts,**/*.test.tsx,**/*.spec.ts,**/*.spec.tsx

# -----------------------------------------------------------------------------
# TypeScript — tsconfig per module
# -----------------------------------------------------------------------------
sonar.typescript.tsconfigPath=backend/tsconfig.json,frontend/tsconfig.json

# -----------------------------------------------------------------------------
# Exclusions
# -----------------------------------------------------------------------------
sonar.exclusions=\
  **/node_modules/**,\
  **/dist/**,\
  **/build/**,\
  **/*.d.ts,\
  **/coverage/**,\
  **/prisma/migrations/**

# -----------------------------------------------------------------------------
# Coverage — generated by Jest with --coverage flag
#   cd backend && npm test -- --coverage --ci
#   cd frontend && npm test -- --coverage --watchAll=false --ci
# -----------------------------------------------------------------------------
sonar.javascript.lcov.reportPaths=backend/coverage/lcov.info,frontend/coverage/lcov.info

# -----------------------------------------------------------------------------
# SonarQube server connection (values resolved from environment variables)
# -----------------------------------------------------------------------------
sonar.host.url=${env.SONAR_HOST_URL}
sonar.token=${env.SONAR_TOKEN}
